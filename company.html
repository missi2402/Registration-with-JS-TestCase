<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <title>Company TestCase CodeIT</title>
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta name="author" content="Antoniuk">
    <link href="css/style.css" rel="stylesheet">
    <link rel="icon" type="image/vnd.microsoft.icon" href="img/favicon.ico">
    <link href="css/bootstrap.min.css" rel="stylesheet">
</head>

<body id="particles-js">
    <header>
        <button onclick=" logOut();">Log out</button>
    </header>
    <main>
        <div class="container">
            <div class="row">
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12 totalCompanies">
                    <h2 class="blockHeader">Total Companies</h2>
                    <div class="totalCompaniesContent"></div>
                </div>
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12 listOfCompanies">
                    <h2 class="blockHeader">List of Companies</h2>
                    <div class="listOfCompaniesContent"></div>
                </div>
                <div class="col-xl-12 col-lg-12 col-md-12 col-sm-12 col-xs-12 companyPartners">
                    <h2 class="blockHeader">Company partners</h2>
                    <div class="companyPartnersContent"></div>
                </div>
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12 companiesByLocation">
                    <h2 class="blockHeader">Companies by location</h2>
                    <div class="companiesByLocationContent"></div>
                </div>
                <div class="col-xl-6 col-lg-6 col-md-6 col-sm-12 col-xs-12 News">
                    <h2 class="blockHeader">News</h2>
                    <div id="carousel-example-generic" class="carousel slide" data-ride="carousel">
                        <div class="carousel-inner" role="listbox">
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>
    <footer>Test task Antoniuk. Kharkov 2016 for CodeIT.</footer>
    <!--Scripts for Bootstrap 4-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="js/tether.min.js"></script>
    <script src="js/bootstrap.min.js"></script>
    <!--Scripts for cross-->
    <script src="js/prefixfree.min.js"></script>
    <!--Scripts for background-->
    <script src="js/particles.min.js"></script>
    <script src="js/app.js"></script>
    </script>
    <script>
    var objectCompany = {};
    var objectNews = {};
    var firstSlide = true;
    window.onload = function() {
        $.ajax({
            type: "POST",
            url: "http://codeit.pro/frontTestTask/company/getList",
            data: $(this).serialize(),
            success: function(data) {
                objectCompany = data;
                $('.totalCompaniesContent').html(objectCompany.list.length);
                $('.listOfCompaniesContent').append('<ul id="findLi">');
                $.each(objectCompany.list, function(key, val) {
                    $('.listOfCompaniesContent').append('<li>' + objectCompany.list[key].name + '</li>')
                });
                $('.listOfCompaniesContent').append('</ul>');
            }
        })
        $.ajax({
            type: "POST",
            url: "http://codeit.pro/frontTestTask/news/getList",
            data: $(this).serialize(),
            success: function(data) {
                objectNews = data;
                $.each(objectNews.list, function(key, val) {
                    if (firstSlide) {
                        $('.carousel-inner').append('<div class="carousel-item active"><img src="' + objectNews.list[key].img + '"><div class="linkHeader"><a href="' + objectNews.list[key].link + '">' + objectNews.list[key].link + '</a></div><div class="description"><strong>Description: </strong>' + objectNews.list[key].description + '</div><div class="author"><strong>Author: </strong>' + objectNews.list[key].author + '</div><div class="date"><strong>Date: </strong>' + (new Date(1000 * objectNews.list[key].date)).toLocaleString() + '</div></div>');
                        firstSlide = false;
                    } else {
                        $('.carousel-inner').append('<div class="carousel-item"><img src="' + objectNews.list[key].img + '"><div class="linkHeader"><a href="' + objectNews.list[key].link + '">' + objectNews.list[key].link + '</a></div><div class="description"><strong>Description: </strong>' + objectNews.list[key].description + '</div><div class="author"><strong>Author: </strong>' + objectNews.list[key].author + '</div><div class="date"><strong>Date: </strong>' + (new Date(1000 * objectNews.list[key].date)).toLocaleString() + '</div></div>');
                    }
                });
                $('.carousel-inner').append('<a class="left carousel-control" href="#carousel-example-generic" role="button" data-slide="prev"><span class="icon-prev" aria-hidden="true"></span></a>');
                $('.carousel-inner').append('<a class="right carousel-control" href="#carousel-example-generic" role="button" data-slide="next"><span class="icon-next" aria-hidden="true"></span></a>');
            }
        })
        event.preventDefault();
        $(".listOfCompanies").on("click", "li", function() {
            alert($(this).text()); // gets text contents of clicked li
            $(".listOfCompanies li").removeClass("checkedLi");
            $(this).toggleClass("checkedLi");
        });
    }

    function logOut() {
        window.location.replace("index.html");
    }

    </script>
    
</body>

</html>
